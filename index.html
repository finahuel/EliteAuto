<!doctype html>
<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EliteAuto | Concesionaria Premium</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <style>
      .hero-bg {
        background-image:
          linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.7)),
          url("https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?auto=format&fit=crop&w=1920&q=80");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
      }
      
      /* Clase para la transición del navbar */
      .nav-scrolled {
        background-color: rgba(255, 255, 255, 1) !important;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        padding-top: 0.5rem !important;
        padding-bottom: 0.5rem !important;
      }
      
      .nav-scrolled .nav-text {
        color: #0f172a !important; /* slate-900 */
      }
      
      .nav-scrolled .nav-logo-icon {
        color: #4f46e5 !important; /* indigo-600 */
      }
    </style>
  </head>
  <body class="bg-gray-50 text-slate-800 font-sans antialiased">
    
    <nav
      class="fixed w-full z-50 transition-all duration-500 py-6"
      id="navbar"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-12">
          
          <a href="#inicio" class="flex items-center group cursor-pointer">
            <i class="ph-fill ph-car text-3xl text-white nav-logo-icon transition-colors mr-2 group-hover:scale-110 duration-300"></i>
            <span class="font-bold text-2xl tracking-tight text-white nav-text transition-colors"
              >EliteAuto</span
            >
          </a>

          <div class="hidden md:flex items-center space-x-8">
            <a
              href="#inicio"
              class="text-white/90 nav-text hover:text-indigo-400 font-medium transition"
              >Inicio</a
            >
            <a
              href="#inventario"
              class="text-white/90 nav-text hover:text-indigo-400 font-medium transition"
              >Vehículos</a
            >
            <a
              href="#contacto"
              class="text-white/90 nav-text hover:text-indigo-400 font-medium transition"
              >Contacto</a
            >
            <button
              onclick="openSellModal()"
              class="bg-white text-indigo-900 px-6 py-2.5 rounded-full font-bold hover:bg-indigo-50 transition shadow-lg border border-transparent hover:border-indigo-100"
            >
              Vender
            </button>
          </div>

          <div class="flex items-center md:hidden">
            <button
              onclick="toggleMobileMenu()"
              class="text-white nav-text p-2 focus:outline-none transition-colors"
            >
              <i id="menuIconOpen" class="ph ph-list text-3xl block"></i>
              <i id="menuIconClose" class="ph ph-x text-3xl hidden"></i>
            </button>
          </div>
        </div>
      </div>

      <div
        id="mobileMenu"
        class="hidden md:hidden bg-white border-t p-4 space-y-3 shadow-2xl absolute w-full left-0 top-full"
      >
        <a
          href="#inicio"
          onclick="closeMobileMenu()"
          class="block text-slate-600 hover:text-indigo-600 font-medium py-3 border-b border-gray-100"
          >Inicio</a
        >
        <a
          href="#inventario"
          onclick="closeMobileMenu()"
          class="block text-slate-600 hover:text-indigo-600 font-medium py-3 border-b border-gray-100"
          >Vehículos</a
        >
        <a
          href="#contacto"
          onclick="closeMobileMenu()"
          class="block text-slate-600 hover:text-indigo-600 font-medium py-3 border-b border-gray-100"
          >Contacto</a
        >
        <button
          onclick="openSellModal(); closeMobileMenu();"
          class="w-full mt-2 bg-indigo-600 text-white px-5 py-3 rounded-lg font-bold hover:bg-indigo-700 transition shadow-lg"
        >
          Vender
        </button>
      </div>
    </nav>

    <section
      id="inicio"
      class="hero-bg min-h-screen flex flex-col items-center justify-center text-center px-4 relative py-20"
    >
      <div class="max-w-4xl text-white z-10 mt-10">
        <h1
          class="text-5xl md:text-7xl font-extrabold mb-6 tracking-tight drop-shadow-2xl leading-tight"
        >
          Tu próximo viaje <br class="hidden md:block" /> comienza aquí
        </h1>
        <p
          class="text-lg md:text-2xl text-gray-100 mb-10 font-light drop-shadow-md max-w-2xl mx-auto"
        >
          Calidad garantizada, financiación a medida y la mejor atención del mercado.
        </p>

        <div class="flex flex-col sm:flex-row items-center justify-center gap-4 w-full px-4">
            <a href="#buscador" 
            class="w-full sm:w-auto min-w-[220px] flex items-center justify-center gap-3 bg-white text-slate-900 font-bold px-8 py-4 rounded-full hover:bg-gray-100 transition transform hover:scale-105 shadow-2xl text-lg">
                <i class="ph-bold ph-magnifying-glass text-xl"></i>
                Comprar Vehículo
            </a>

            <button onclick="openSellModal()" 
                    class="w-full sm:w-auto min-w-[220px] flex items-center justify-center gap-3 bg-white text-slate-900 font-bold px-8 py-4 rounded-full hover:bg-gray-100 transition transform hover:scale-105 shadow-2xl text-lg border-2 border-white">
                <i class="ph-bold ph-currency-dollar text-xl"></i>
                Vender Vehículo
            </button>
        </div>
      </div>

      <a 
  href="#buscador" 
  class="relative mt-12 md:absolute md:bottom-10 md:mt-0 animate-bounce text-white/70 hover:text-white transition cursor-pointer z-20 p-2"
>
    <i class="ph ph-caret-double-down text-4xl"></i>
</a>
    </section>

    <section id="buscador" class="bg-gray-50 pt-16 pb-8 border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center mb-8">
                <h2 class="text-slate-900 text-3xl font-bold">Encuentra tu vehículo ideal</h2>
                <p class="text-slate-500 mt-2">Utiliza los filtros para buscar en nuestro stock</p>
            </div>

            <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl border border-gray-100 grid grid-cols-1 md:grid-cols-12 gap-4 items-end">
                <div class="md:col-span-4">
                  <label class="block text-xs font-bold text-indigo-600 uppercase mb-2 ml-1"
                    >¿Qué buscas?</label
                  >
                  <div class="relative">
                    <i
                      class="ph ph-magnifying-glass absolute left-4 top-3.5 text-gray-400 text-lg"
                    ></i>
                    <input
                      type="text"
                      id="searchInput"
                      placeholder="Marca o modelo..."
                      class="w-full pl-12 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none text-base"
                    />
                  </div>
                </div>
        
                <div class="md:col-span-3">
                  <label class="block text-xs font-bold text-gray-500 uppercase mb-2 ml-1"
                    >Categoría</label
                  >
                  <select
                    id="tipoFilter"
                    class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none text-base cursor-pointer"
                  ></select>
                </div>
        
                <div class="md:col-span-3">
                  <label class="block text-xs font-bold text-gray-500 uppercase mb-2 ml-1"
                    >Año desde</label
                  >
                  <select
                    id="yearFromFilter"
                    class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 appearance-none text-base cursor-pointer"
                  ></select>
                </div>
        
                <div class="md:col-span-2">
                  <button
                    onclick="applyFilters()"
                    class="w-full bg-indigo-600 text-white font-bold h-[50px] rounded-xl hover:bg-indigo-700 transition flex justify-center items-center gap-2 shadow-lg uppercase text-xs tracking-wider"
                  >
                    <i class="ph-bold ph-magnifying-glass text-lg"></i> Buscar
                  </button>
                </div>
            </div>
            
            <div class="flex justify-end mt-3 pr-2">
                <button
                  onclick="clearFilters()"
                  class="text-xs uppercase tracking-widest text-gray-500 hover:text-indigo-600 transition flex items-center gap-1 font-semibold"
                >
                  <i class="ph ph-arrow-counter-clockwise"></i> Limpiar filtros
                </button>
            </div>
        </div>
    </section>

    <section id="inventario" class="max-w-7xl mx-auto px-4 pb-20 pt-10">
      <div class="flex flex-col md:flex-row justify-between items-end mb-10 border-b border-gray-200 pb-4">
        <h2 class="text-3xl md:text-4xl font-extrabold text-slate-900">Vehículos Destacados</h2>
        <span id="resultCount" class="text-gray-500 font-medium mt-2 md:mt-0">Cargando catálogo...</span>
      </div>

      <div id="loader" class="flex justify-center py-20">
        <div
          class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"
        ></div>
      </div>

      <div
        id="carsGrid"
        class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"
      ></div>
    </section>

    <footer id="contacto" class="bg-slate-900 text-white pt-16 pb-8">
      <div
        class="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12"
      >
        <div>
          <div class="flex items-center mb-4">
            <i class="ph-fill ph-car text-2xl text-indigo-400 mr-2"></i>
            <span class="font-bold text-xl">EliteAuto</span>
          </div>
          <p class="text-slate-400 text-sm leading-relaxed">
            Especialistas en vehículos seminuevos seleccionados. Transparencia,
            seguridad y confianza en cada kilómetro.
          </p>
        </div>

        <div>
          <h3 class="font-bold text-lg mb-4">Contacto</h3>
          <ul class="space-y-3 text-slate-300 text-sm">
            <li class="flex items-center">
              <i class="ph ph-whatsapp-logo text-xl mr-3 text-green-400"></i>
              +54 9 11 1234-5678
            </li>
            <li class="flex items-center">
              <i class="ph ph-envelope-simple text-xl mr-3"></i>
              ventas@eliteauto.com
            </li>
            <li class="flex items-center">
              <i class="ph ph-map-pin text-xl mr-3"></i> Av. Siempre Viva 123
            </li>
          </ul>
        </div>

        <div>
          <h3 class="font-bold text-lg mb-4">Horarios</h3>
          <p class="text-slate-400 text-sm mb-2">
            Lunes a Viernes:<br /><span class="text-white">9:00 - 19:00</span>
          </p>
          <p class="text-slate-400 text-sm">
            Sábados:<br /><span class="text-white">10:00 - 14:00</span>
          </p>
        </div>

        <div
          class="h-48 rounded-lg overflow-hidden shadow-lg border border-slate-700 relative"
        >
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d313.1842813498379!2d-55.90107991971598!3d-27.367104994194502!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9457be30c842243d%3A0xce46db89ea6e1ddc!2sIMO%20AUTOM%C3%93VILES!5e0!3m2!1ses!2sar!4v1769970706190!5m2!1ses!2sar"
            class="w-full h-full"
            style="border: 0"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        </div>
      </div>

      <div
        class="border-t border-slate-800 pt-8 text-center text-xs text-slate-500"
      >
        © 2026 EliteAuto. Todos los derechos reservados.
      </div>
    </footer>

    <div
      id="carModal"
      class="fixed inset-0 z-[60] hidden"
      aria-labelledby="modal-title"
      role="dialog"
      aria-modal="true"
    >
      <div
        class="fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity backdrop-blur-sm"
        onclick="closeModal()"
      ></div>

      <div class="fixed inset-0 z-10 overflow-y-auto">
        <div
          class="flex min-h-full items-center justify-center p-4 text-center sm:p-0"
        >
          <div
            class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl"
          >
            <button
              onclick="closeModal()"
              class="absolute top-4 right-4 z-20 bg-white/80 hover:bg-white rounded-full p-2 text-gray-500 hover:text-gray-800 transition"
            >
              <i class="ph-bold ph-x text-xl"></i>
            </button>

            <div class="grid grid-cols-1 md:grid-cols-2">
              <div class="bg-gray-100 p-4 md:p-0">
                <div class="h-64 md:h-96 w-full overflow-hidden relative">
                  <img
                    id="modalMainImage"
                    src=""
                    alt="Auto"
                    class="w-full h-full object-cover"
                  />
                </div>
                <div
                  id="modalThumbnails"
                  class="flex gap-2 p-4 overflow-x-auto whitespace-nowrap bg-white border-t border-gray-100"
                ></div>
              </div>

              <div class="p-6 md:p-8 flex flex-col h-full">
                <div class="flex-grow">
                  <span
                    id="modalEstado"
                    class="inline-block px-3 py-1 rounded-full text-xs font-bold mb-3"
                  ></span>
                  <h2
                    id="modalTitle"
                    class="text-3xl font-bold text-gray-900 mb-1"
                  ></h2>
                  <p id="modalSubtitle" class="text-lg text-gray-500 mb-6"></p>

                  <div
                    class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6 text-[13px] text-gray-600 bg-gray-50 p-4 rounded-lg border border-gray-100"
                  >
                    <div>
                      <span
                        class="font-bold block text-gray-900 uppercase text-[10px] text-indigo-600"
                        >Año</span
                      >
                      <span id="modalAnio"></span>
                    </div>
                    <div>
                      <span
                        class="font-bold block text-gray-900 uppercase text-[10px] text-indigo-600"
                        >KM</span
                      >
                      <span id="modalKm"></span>
                    </div>
                    <div>
                      <span
                        class="font-bold block text-gray-900 uppercase text-[10px] text-indigo-600"
                        >Motor</span
                      >
                      <span id="modalCilindrada"></span>
                    </div>
                    <div>
                      <span
                        class="font-bold block text-gray-900 uppercase text-[10px] text-indigo-600"
                        >Combustible</span
                      >
                      <span id="modalCombustible"></span>
                    </div>
                    <div>
                      <span
                        class="font-bold block text-gray-900 uppercase text-[10px] text-indigo-600"
                        >Transmisión</span
                      >
                      <span id="modalTransmision"></span>
                    </div>
                    <div>
                      <span
                        class="font-bold block text-gray-900 uppercase text-[10px] text-indigo-600"
                        >Marchas</span
                      >
                      <span id="modalVelocidades"></span>
                    </div>
                  </div>

                  <div
                    class="prose prose-sm text-gray-600 mb-6 max-h-40 overflow-y-auto pr-2"
                  >
                    <h4 class="font-bold text-gray-900 mb-2">Descripción:</h4>
                    <p id="modalDesc">Sin descripción adicional.</p>
                  </div>
                </div>

                <div class="mt-auto border-t pt-6">
                  <div class="flex items-center justify-between mb-4">
                    <span class="text-gray-500">Precio Contado</span>
                    <span
                      id="modalPrice"
                      class="text-3xl font-bold text-indigo-600"
                    ></span>
                  </div>
                  <a
                    id="modalWhatsapp"
                    href="#"
                    target="_blank"
                    class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition"
                  >
                    <i class="ph-bold ph-whatsapp-logo text-xl"></i> Me interesa
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      id="sellModal"
      class="fixed inset-0 z-[70] hidden"
      aria-labelledby="modal-title"
      role="dialog"
      aria-modal="true"
    >
      <div
        class="fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity backdrop-blur-sm"
        onclick="closeSellModal()"
      ></div>

      <div class="fixed inset-0 z-10 overflow-y-auto">
        <div
          class="flex min-h-full items-center justify-center p-4 text-center sm:p-0"
        >
          <div
            class="relative transform overflow-hidden rounded-xl bg-white text-left shadow-2xl transition-all sm:my-8 w-full md:max-w-3xl"
          >
            <button
              onclick="closeSellModal()"
              class="absolute top-4 right-4 z-20 bg-white hover:bg-gray-100 rounded-full p-2 text-gray-500 transition focus:outline-none"
            >
              <i class="ph-bold ph-x text-xl"></i>
            </button>

            <div class="bg-white px-6 py-8 md:p-10">
              <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-slate-900 mb-2">
                  Vende tu Vehículo
                </h2>
                <p class="text-slate-500">
                  Completa el formulario y te haremos una oferta justa.
                </p>
              </div>

              <form id="sellForm" class="space-y-8">
                <div class="bg-gray-50 p-6 rounded-xl border border-gray-100">
                  <h3
                    class="text-lg font-bold text-slate-800 mb-6 flex items-center"
                  >
                    <i class="ph-fill ph-user-circle text-indigo-600 mr-2"></i
                    >Información Personal
                  </h3>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                      <label class="block text-sm font-bold text-slate-700 mb-1"
                        >Nombre *</label
                      >
                      <input
                        type="text"
                        name="nombre"
                        required
                        class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition"
                        placeholder="Tu nombre"
                      />
                    </div>
                    <div>
                      <label class="block text-sm font-bold text-slate-700 mb-1"
                        >Apellido *</label
                      >
                      <input
                        type="text"
                        name="apellido"
                        required
                        class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition"
                        placeholder="Tu apellido"
                      />
                    </div>
                    <div>
                      <label class="block text-sm font-bold text-slate-700 mb-1"
                        >Email *</label
                      >
                      <input
                        type="email"
                        name="email"
                        required
                        class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition"
                        placeholder="tu@email.com"
                      />
                    </div>
                    <div>
                      <label class="block text-sm font-bold text-slate-700 mb-1"
                        >Teléfono *</label
                      >
                      <input
                        type="tel"
                        name="telefono"
                        required
                        class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition"
                        placeholder="Ej: 11 1234-5678"
                      />
                    </div>
                    <div>
                      <label class="block text-sm font-bold text-slate-700 mb-1"
                        >Ciudad *</label
                      >
                      <input
                        type="text"
                        name="ciudad"
                        required
                        class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition"
                      />
                    </div>
                    <div>
                      <label class="block text-sm font-bold text-slate-700 mb-1"
                        >Provincia *</label
                      >
                      <input
                        type="text"
                        name="provincia"
                        required
                        class="w-full p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition"
                      />
                    </div>
                  </div>
                </div>

                <div
                  class="bg-indigo-50 p-6 rounded-xl border border-indigo-100"
                >
                  <h3
                    class="text-lg font-bold text-slate-800 mb-6 flex items-center"
                  >
                    <i class="ph-fill ph-car-profile text-indigo-600 mr-2"></i
                    >Información del Vehículo
                  </h3>
                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="md:col-span-2">
                      <label class="block text-sm font-bold text-slate-700 mb-1"
                        >Marca y Modelo *</label
                      >
                      <input
                        type="text"
                        name="marcaModelo"
                        required
                        class="w-full p-3 border border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition"
                        placeholder="Ej: Toyota Corolla SEG"
                      />
                    </div>
                    <div>
                      <label class="block text-sm font-bold text-slate-700 mb-1"
                        >Año *</label
                      >
                      <input
                        type="number"
                        name="anioAuto"
                        required
                        class="w-full p-3 border border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition"
                        placeholder="Ej: 2020"
                      />
                    </div>
                    <div>
                      <label class="block text-sm font-bold text-slate-700 mb-1"
                        >Kilometraje</label
                      >
                      <input
                        type="text"
                        name="kmAuto"
                        class="w-full p-3 border border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none transition"
                        placeholder="Ej: 85000 km"
                      />
                    </div>

                    <div>
                      <label class="block text-sm font-bold text-slate-700 mb-1"
                        >Combustible</label
                      >
                      <input
                        type="text"
                        name="combustibleAuto"
                        class="w-full p-3 border border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none bg-white transition"
                        placeholder="Ej: Nafta, Diesel"
                      >
                    </div>
                    <div>
                      <label class="block text-sm font-bold text-slate-700 mb-1"
                        >Transmisión</label
                      >
                      <select
                        name="transmisionAuto"
                        class="w-full p-3 border border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none bg-white transition"
                      >
                        <option value="">Seleccionar</option>
                        <option value="Manual">Manual</option>
                        <option value="Automática">Automática</option>
                        <option value="CVT">CVT</option>
                      </select>
                    </div>

                    <div>
                      <label class="block text-sm font-bold text-slate-700 mb-1"
                        >Precio Esperado (aprox.)</label
                      >
                      <div class="relative">
                        <span class="absolute left-3 top-3 text-gray-500"
                          >$</span
                        >
                        <input
                          type="text"
                          name="precioAuto"
                          class="w-full pl-8 p-3 border border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none transition"
                        />
                      </div>
                    </div>

                    <div>
                      <label
                        class="block text-sm font-bold text-indigo-700 mb-1"
                        >¿Qué tipo de operación buscas? *</label
                      >
                      <select
                        name="tipoOperacion"
                        required
                        class="w-full p-3 border-2 border-indigo-300 bg-white rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none transition font-bold text-indigo-900"
                      >
                        <option value="Solo Venta">
                          Solo quiero vender
                        </option>
                        <option value="Permuta">
                          Quiero permutar 
                        </option>
                      </select>
                    </div>

                    <div class="md:col-span-2">
                      <label class="block text-sm font-bold text-slate-700 mb-1"
                        >Descripción / Estado del vehículo</label
                      >
                      <textarea
                        name="descripcionAuto"
                        rows="3"
                        class="w-full p-3 border border-indigo-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none transition"
                        placeholder="Detalles importantes, accesorios, estado de cubiertas, etc..."
                      ></textarea>
                    </div>
                  </div>
                </div>

                <div
                  id="formFeedback"
                  class="hidden rounded-lg p-4 text-center text-sm font-bold"
                ></div>

                <button
                  type="submit"
                  id="btnSubmitForm"
                  class="w-full bg-slate-900 text-white font-bold py-4 rounded-xl hover:bg-indigo-600 transition duration-300 flex items-center justify-center gap-2 text-lg shadow-xl"
                >
                  <span>Enviar Solicitud</span>
                  <i class="ph-bold ph-paper-plane-tilt text-2xl"></i>
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <a
      href="https://wa.me/5491112345678?text=Hola!%20Quisiera%20hacer%20una%20consulta."
      target="_blank"
      class="fixed bottom-6 right-6 z-40 bg-green-600 text-white w-14 h-14 rounded-full shadow-2xl hover:scale-110 transition-all duration-300 flex items-center justify-center group"
      aria-label="Chat on WhatsApp"
    >
      <i class="ph-fill ph-whatsapp-logo text-3xl"></i>
      <span
        class="absolute right-16 bg-slate-800 text-white text-[10px] uppercase tracking-widest px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none"
      >
        Contacto directo
      </span>
    </a>

    <script>
      // *** PEGA TU URL DE APPS SCRIPT AQUÍ ***
      const APPS_SCRIPT_URL =
        "https://script.google.com/macros/s/AKfycbzwKaiiNnjAPXP3x4aquEtzEyBnL5g_-ZFiJ0Zsct-TBS5hehgczXkdwkR7pqi88OKOPA/exec";

      let inventory = [];

      // Inicializar
      document.addEventListener("DOMContentLoaded", () => {
        fetchData();
        
        // --- LÓGICA DE NAVBAR SCROLL ---
        const nav = document.getElementById('navbar');
        window.onscroll = function() {
            if (window.scrollY > 50) {
                nav.classList.add('nav-scrolled');
            } else {
                nav.classList.remove('nav-scrolled');
            }
        };
      });

      // --- MENÚ MÓVIL ---
      function toggleMobileMenu() {
        const menu = document.getElementById("mobileMenu");
        const iconOpen = document.getElementById("menuIconOpen");
        const iconClose = document.getElementById("menuIconClose");
        menu.classList.toggle("hidden");
        
        // Cambiar color del ícono según estado
        if (menu.classList.contains("hidden")) {
          iconOpen.classList.remove("hidden");
          iconClose.classList.add("hidden");
        } else {
          iconOpen.classList.add("hidden");
          iconClose.classList.remove("hidden");
          // Forzar color oscuro en ícono cerrar
          iconClose.style.color = "#0f172a"; 
        }
      }

      function closeMobileMenu() {
        document.getElementById("mobileMenu").classList.add("hidden");
        document.getElementById("menuIconOpen").classList.remove("hidden");
        document.getElementById("menuIconClose").classList.add("hidden");
      }

      // --- CARGA DE DATOS ---
      async function fetchData() {
        try {
          if (!APPS_SCRIPT_URL || APPS_SCRIPT_URL.includes("AQUÍ_TU_URL")) {
            console.warn("URL no configurada, usando datos demo.");
            useDemoData();
            return;
          }

          const response = await fetch(APPS_SCRIPT_URL);

          if (!response.ok) throw new Error(`Error HTTP: ${response.status}`);

          const data = await response.json();

          if (!Array.isArray(data))
            throw new Error("El formato de datos no es una lista válida.");

          inventory = data;
          setupFilters(inventory);
          renderCars(inventory);
          document.getElementById("loader").classList.add("hidden");
        } catch (error) {
          console.error("Error detallado:", error);
          document.getElementById("loader").innerHTML = `
                <div class="text-center text-red-500">
                    <p class="font-bold">Error cargando vehículos</p>
                    <p class="text-sm">Verifica la URL del script y los permisos.</p>
                </div>
            `;
        }
      }

      // --- RENDERIZADO (GRILLA) ---
      function renderCars(cars) {
        const grid = document.getElementById("carsGrid");
        grid.innerHTML = "";
        document.getElementById("resultCount").innerText =
          `${cars.length} vehículos encontrados`;

        if (cars.length === 0) {
          grid.innerHTML =
            '<div class="col-span-full text-center py-10 text-gray-500">No encontramos resultados.</div>';
          return;
        }

        cars.forEach((car, index) => {
          const rawImages = car.imagen ? car.imagen.toString().split(",") : [];
          const mainImage =
            rawImages.length > 0
              ? rawImages[0].trim()
              : "https://via.placeholder.com/400x300?text=Sin+Foto";

          const precio = new Intl.NumberFormat("en-US", {
            style: "currency",
            currency: "USD",
            maximumFractionDigits: 0,
          }).format(car.precio);
          const km = parseInt(car.kilometraje).toLocaleString("es-ES");
          const isSold = car.estado && car.estado.toLowerCase() === "vendido";

          const badge = isSold
            ? '<span class="absolute top-4 right-4 bg-red-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg z-10">VENDIDO</span>'
            : '<span class="absolute top-4 right-4 bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg z-10">DISPONIBLE</span>';

          const carId = car.id || index;

          const html = `
            <div class="bg-white rounded-xl shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 overflow-hidden group flex flex-col h-full ${isSold ? "opacity-75" : ""}">
                <div class="relative h-56 overflow-hidden cursor-pointer" onclick="openModal(${carId})">
                    ${badge}
                    <img src="${mainImage}" alt="${car.modelo}" class="w-full h-full object-cover transform group-hover:scale-110 transition duration-700">
                    <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition duration-300 flex items-center justify-center">
                        <span class="bg-white/90 text-slate-900 px-4 py-2 rounded-full font-bold opacity-0 group-hover:opacity-100 transition transform translate-y-2 group-hover:translate-y-0 shadow-lg">Ver Detalles</span>
                    </div>
                </div>
                
                <div class="p-5 flex-grow flex flex-col justify-between">
                    <div>
                        <h3 class="text-xl font-bold text-slate-900 mb-1">${car.modelo}</h3>
                        <p class="text-slate-500 text-sm mb-4">${car.marca} • ${car.anio} • ${car.kilometraje}km</p>
                    </div>
                    
                    <div class="mt-4 pt-4 border-t border-gray-100">
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-2xl font-bold text-indigo-600">${precio}</span>
                        </div>
                        
                        <div class="flex gap-2">
                            <button onclick="openModal(${carId})" 
                                class="flex-1 bg-slate-100 text-slate-700 font-bold py-2.5 rounded-lg hover:bg-slate-200 transition text-xs uppercase tracking-wider">
                                Detalles
                            </button>
                            <a href="https://wa.me/5491112345678?text=${encodeURIComponent("Hola, me interesa el " + car.marca + " " + car.modelo)}" 
                                target="_blank"
                                class="flex-[1.5] bg-green-600 text-white font-bold py-2.5 rounded-lg hover:bg-[#20ba5a] transition flex items-center justify-center gap-2 text-xs uppercase tracking-wider shadow-sm shadow-green-100">
                                <i class="ph-fill ph-whatsapp-logo text-lg"></i>
                                Me interesa
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            `;
          grid.innerHTML += html;
        });
      }

      // --- MODAL DE DETALLES ---
      function openModal(id) {
        const car = inventory.find((c) => c.id == id) || inventory[id];
        if (!car) return;

        document.getElementById("modalTitle").innerText = car.modelo;
        document.getElementById("modalSubtitle").innerText = car.marca;
        document.getElementById("modalAnio").innerText = car.anio;
        document.getElementById("modalKm").innerText = parseInt(
          car.kilometraje,
        ).toLocaleString("es-ES");
        document.getElementById("modalCilindrada").innerText =
          car.cilindrada || "-";
        document.getElementById("modalCombustible").innerText =
          car.combustible || "-";
        document.getElementById("modalTransmision").innerText =
          car.transmision || "-";
        document.getElementById("modalVelocidades").innerText =
          car.velocidades || "-";
        document.getElementById("modalDesc").innerText =
          car.descripcion || "Consulte por más detalles sobre este vehículo.";

        const precio = new Intl.NumberFormat("en-US", {
          style: "currency",
          currency: "USD",
          maximumFractionDigits: 0,
        }).format(car.precio);
        document.getElementById("modalPrice").innerText = precio;

        const statusEl = document.getElementById("modalEstado");
        const isSold = car.estado && car.estado.toLowerCase() === "vendido";
        statusEl.innerText = isSold ? "VENDIDO" : "DISPONIBLE";
        statusEl.className = isSold
          ? "inline-block px-3 py-1 rounded-full text-xs font-bold mb-3 bg-red-100 text-red-800"
          : "inline-block px-3 py-1 rounded-full text-xs font-bold mb-3 bg-green-100 text-green-800";

        const msg = `Hola, vi el ${car.marca} ${car.modelo} (${car.anio}) en la web y quisiera más info.`;
        document.getElementById("modalWhatsapp").href =
          `https://wa.me/5491112345678?text=${encodeURIComponent(msg)}`;

        const rawImages = car.imagen ? car.imagen.toString().split(",") : [];
        const images = rawImages
          .map((url) => url.trim())
          .filter((url) => url.length > 0);

        const mainImg = document.getElementById("modalMainImage");
        const thumbsContainer = document.getElementById("modalThumbnails");

        thumbsContainer.innerHTML = "";

        if (images.length > 0) {
          mainImg.src = images[0];
          images.forEach((imgUrl) => {
            const thumb = document.createElement("img");
            thumb.src = imgUrl;
            thumb.className =
              "h-16 w-24 object-cover rounded cursor-pointer border-2 border-transparent hover:border-indigo-600 transition opacity-70 hover:opacity-100";
            thumb.onclick = function () {
              mainImg.src = imgUrl;
            };
            thumbsContainer.appendChild(thumb);
          });
        } else {
          mainImg.src = "https://via.placeholder.com/600x400?text=Sin+Foto";
        }

        document.getElementById("carModal").classList.remove("hidden");
        document.body.style.overflow = "hidden";
      }

      function closeModal() {
        document.getElementById("carModal").classList.add("hidden");
        document.body.style.overflow = "auto";
      }

      function setupFilters(data) {
        const tipos = [
          ...new Set(data.map((c) => c.tipo).filter((t) => t)),
        ].sort();
        const tipoSelect = document.getElementById("tipoFilter");

        tipoSelect.innerHTML = '<option value="">Todas las categorías</option>';
        tipos.forEach((t) => {
          const opt = document.createElement("option");
          opt.value = t;
          opt.innerText = t.charAt(0).toUpperCase() + t.slice(1);
          tipoSelect.appendChild(opt);
        });

        const years = [
          ...new Set(data.map((c) => c.anio).filter((y) => y)),
        ].sort((a, b) => b - a);
        const yearSelect = document.getElementById("yearFromFilter");

        yearSelect.innerHTML = '<option value="">Cualquier año</option>';
        years.forEach((y) => {
          const opt = document.createElement("option");
          opt.value = y;
          opt.innerText = `Desde ${y}`;
          yearSelect.appendChild(opt);
        });

        document
          .getElementById("searchInput")
          .addEventListener("input", applyFilters);
        document
          .getElementById("tipoFilter")
          .addEventListener("change", applyFilters);
        document
          .getElementById("yearFromFilter")
          .addEventListener("change", applyFilters);
      }

      function applyFilters() {
        const search = document
          .getElementById("searchInput")
          .value.toLowerCase();
        const tipo = document.getElementById("tipoFilter").value;
        const yearFrom = document.getElementById("yearFromFilter").value;

        const filtered = inventory.filter((car) => {
          const matchSearch = (car.marca + " " + car.modelo)
            .toLowerCase()
            .includes(search);
          const matchTipo =
            tipo === "" ||
            (car.tipo && car.tipo.toLowerCase() === tipo.toLowerCase());
          const matchYear =
            yearFrom === "" || parseInt(car.anio) >= parseInt(yearFrom);

          return matchSearch && matchTipo && matchYear;
        });

        renderCars(filtered);
      }

      function clearFilters() {
        document.getElementById("searchInput").value = "";
        document.getElementById("tipoFilter").value = "";
        document.getElementById("yearFromFilter").value = "";
        renderCars(inventory);
      }

      // ==========================================
      // LÓGICA DEL MODAL "VENDER MI AUTO"
      // ==========================================

      const sellModal = document.getElementById("sellModal");
      const sellForm = document.getElementById("sellForm");
      const formFeedback = document.getElementById("formFeedback");
      const btnSubmit = document.getElementById("btnSubmitForm");
      const originalBtnText = btnSubmit.innerHTML;

      function openSellModal() {
        sellModal.classList.remove("hidden");
        document.body.style.overflow = "hidden";
      }

      function closeSellModal() {
        sellModal.classList.add("hidden");
        document.body.style.overflow = "auto";
      }

      function resetFormFeedback() {
        formFeedback.classList.add("hidden");
        formFeedback.className =
          "hidden rounded-lg p-4 text-center text-sm font-bold";
        formFeedback.innerText = "";
      }

      sellForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        btnSubmit.disabled = true;
        btnSubmit.innerHTML =
          '<i class="ph-bold ph-spinner animate-spin text-2xl"></i> Enviando...';
        resetFormFeedback();

        try {
            const formData = new FormData(sellForm);
            const queryString = new URLSearchParams();
            
            queryString.append('nombre', formData.get('nombre'));
            queryString.append('apellido', formData.get('apellido'));
            queryString.append('email', formData.get('email'));
            queryString.append('telefono', formData.get('telefono'));
            queryString.append('ciudad', formData.get('ciudad'));
            queryString.append('provincia', formData.get('provincia'));
            
            const marcaModelo = formData.get('marcaModelo').split(' ');
            queryString.append('marcaAuto', marcaModelo[0] || '');
            queryString.append('modeloAuto', marcaModelo.slice(1).join(' ') || '');
            
            queryString.append('anioAuto', formData.get('anioAuto'));
            queryString.append('kmAuto', formData.get('kmAuto'));
            queryString.append('combustibleAuto', formData.get('combustibleAuto'));
            queryString.append('transmisionAuto', formData.get('transmisionAuto'));
            queryString.append('precioAuto', formData.get('precioAuto'));
            queryString.append('tipoOperacion', formData.get('tipoOperacion'));
            queryString.append('descripcionAuto', formData.get('descripcionAuto'));

            await fetch(APPS_SCRIPT_URL + '?' + queryString.toString(), {
                method: 'POST',
                mode: 'no-cors'
            });

            sellForm.reset();
            formFeedback.innerText = "¡Solicitud enviada con éxito!";
            formFeedback.className = 'rounded-lg p-4 text-center text-sm font-bold bg-green-100 text-green-800';
            formFeedback.classList.remove('hidden');

            setTimeout(() => { closeSellModal(); resetFormFeedback(); }, 3000);

        } catch (error) {
            console.error("Error al enviar:", error);
            formFeedback.innerText = "Error de conexión. Intenta nuevamente.";
            formFeedback.className = 'rounded-lg p-4 text-center text-sm font-bold bg-red-100 text-red-800';
            formFeedback.classList.remove('hidden');
        } finally {
            btnSubmit.disabled = false;
            btnSubmit.innerHTML = originalBtnText;
        }
      });
    </script>
  </body>
</html>
